<controls:MetroWindow x:Class="Twice.Views.Wizards.AddColumnDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:controls="http://metro.mahapps.com/winfx/xaml/controls"
        xmlns:lex="http://wpflocalizeextension.codeplex.com"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        xmlns:views="clr-namespace:Twice.Views"
        xmlns:columnManagement="clr-namespace:Twice.ViewModels.ColumnManagement"
        xmlns:proxies="clr-namespace:Twice.Views.Proxies"
        xmlns:twitter="clr-namespace:Twice.ViewModels.Twitter"
        DataContext="{Binding AddColumn, Source={StaticResource DialogLocator}}"
        mc:Ignorable="d" Style="{StaticResource DialogStyle}" WindowStartupLocation="CenterOwner"
        Title="{lex:Loc AddColumn}" Height="400" Width="600">
	<controls:MetroWindow.LeftWindowCommands>
		<controls:WindowCommands>
			<Button Command="{Binding GotoPrevPageCommand}">
				<materialDesign:PackIcon Kind="ArrowLeft" />
			</Button>
		</controls:WindowCommands>
	</controls:MetroWindow.LeftWindowCommands>
	<controls:MetroWindow.Resources>
		<proxies:AddColumnDataProxy Data="{Binding}" x:Key="DataProxy" />
	</controls:MetroWindow.Resources>
	<Grid>
		<ContentControl Content="{Binding CurrentPage}">
			<ContentControl.ContentTemplateSelector>
				<views:GenericTemplateSelector>
					<views:GenericDataTemplateSelectorItem TemplatedType="columnManagement:ColumnTypeSelctorPage">
						<DataTemplate DataType="columnManagement:ColumnTypeSelctorPage">
							<ItemsControl ItemsSource="{Binding ColumnTypes}">
								<ItemsControl.ItemsPanel>
									<ItemsPanelTemplate>
										<WrapPanel Orientation="Horizontal" />
									</ItemsPanelTemplate>
								</ItemsControl.ItemsPanel>
								<ItemsControl.ItemTemplate>
									<DataTemplate DataType="columnManagement:ColumnTypeItem">
										<Button Command="{Binding Data.AddColumnTypeCommand, Source={StaticResource DataProxy}}" CommandParameter="{Binding Type}"
												ToolTip="{Binding Description}" Margin="5">
											<DockPanel>
												<materialDesign:PackIcon Kind="{Binding Icon}" VerticalAlignment="Center" DockPanel.Dock="Left" />
												<TextBlock Text="{Binding DisplayName}" />
											</DockPanel>
										</Button>
									</DataTemplate>
								</ItemsControl.ItemTemplate>
							</ItemsControl>
						</DataTemplate>
					</views:GenericDataTemplateSelectorItem>
					<views:GenericDataTemplateSelectorItem TemplatedType="columnManagement:SourceAccountSelectorPage">
						<DataTemplate DataType="columnManagement:SourceAccountSelectorPage">
							<StackPanel Orientation="Vertical">
								<TextBlock Text="{lex:Loc SelectAccountYouWantToAddColumnFor}" Margin="5" />
								<ItemsControl ItemsSource="{Binding Accounts}">
									<ItemsControl.ItemsPanel>
										<ItemsPanelTemplate>
											<WrapPanel Orientation="Horizontal" />
										</ItemsPanelTemplate>
									</ItemsControl.ItemsPanel>
									<ItemsControl.ItemTemplate>
										<DataTemplate DataType="twitter:AccountEntry">
											<materialDesign:Card Margin="5" Foreground="{StaticResource IdealForegroundColorBrush}">
												<StackPanel Orientation="Vertical">
													<Image Source="{Binding Image}" Width="72" Height="72" Margin="5" />

													<Button Content="{Binding ScreenName}" Margin="5" Style="{StaticResource MaterialDesignFlatButton}" />
												</StackPanel>
											</materialDesign:Card>
										</DataTemplate>
									</ItemsControl.ItemTemplate>
								</ItemsControl>
							</StackPanel>
						</DataTemplate>
					</views:GenericDataTemplateSelectorItem>
				</views:GenericTemplateSelector>
			</ContentControl.ContentTemplateSelector>
		</ContentControl>
	</Grid>
</controls:MetroWindow>